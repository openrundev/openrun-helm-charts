replicaCount: 1

image:
  repository: ghcr.io/openrundev/openrun
  tag: ""
  pullPolicy: IfNotPresent

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: ""

rbac:
  create: true
  clusterWide: true
  extraRules: []

service:
  type: LoadBalancer

livenessProbe:
  enabled: true
  initialDelaySeconds: 20
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 6

readinessProbe:
  enabled: true
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 6

config:
  adminUser: admin
  serverUri: ""
  logging:
    level: INFO
    console: true
    file: false
    access_logging: true
  http:
    host: 0.0.0.0
    port: 80
    redirectToHttps: false
  https:
    enabled: true
    host: 0.0.0.0
    port: 443
    serviceEmail: ""
    useStaging: true
  security:
    adminPassword: ""
    adminPasswordBcrypt: ""
    sessionSecret: ""
    sessionBlockKey: ""
    appDefaultAuthType: ""
    defaultSecretsProvider: ""
    # Callback URL for OAuth and SAML authentication flows.
    # Example: "https://openrun.example.com"
    callbackUrl: ""
  system:
    defaultDomain: ""
  registry:
    url: ""
    project: ""
    insecure: true
    type: ""
    username: ""
    password: ""
    awsRegion: ""
  metadata:
    # Database name for main metadata. Defaults to <namespace>_main if empty.
    database: ""
    # Database name for audit logs. Defaults to <namespace>_audit if empty.
    auditDatabase: ""
    # Database name for app store plugin. Defaults to <namespace>_app_store if empty.
    appStoreDatabase: ""
    # Database name for fs plugin. Defaults to <namespace>_fs if empty.
    fsDatabase: ""
    sslMode: disable
    parameters: ""
  kubernetes:
    namespace: ""

postgres:
  # The bundled StatefulSet is intended for demos and testing. For production,
  # point OpenRun at a managed Postgres service or a CloudNativePG deployment.
  enabled: true
  clusterName: openrun-db
  replicaCount: 1
  image:
    repository: postgres
    tag: "16.4"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 5432
    annotations: {}
  database: openrun
  persistence:
    enabled: true
    accessModes:
      - ReadWriteOnce
    size: 20Gi
    storageClassName: ""
  resources: {}
  annotations: {}
  podAnnotations: {}
  podLabels: {}
  podSecurityContext: {}
  containerSecurityContext: {}
  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
  readinessProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
  extraEnv: []
  appUser:
    username: openrun
    password: openrun
    existingSecretName: ""
    usernameKey: username
    passwordKey: password
  superuser:
    username: postgres
    password: postgres
    existingSecretName: ""
    usernameKey: username
    passwordKey: password

externalDatabase:
  enabled: false
  host: ""
  port: 5432
  database: openrun
  username: ""
  password: ""
  existingSecretName: ""
  usernameKey: username
  passwordKey: password
  sslMode: disable
  parameters: ""

dbInit:
  waitForJob: true
  waitTimeoutSeconds: 600
  waitImage:
    repository: curlimages/curl
    tag: "8.6.0"
    pullPolicy: IfNotPresent

openrunConfigSecret:
  name: ""

# Git authentication for private repositories.
# Multiple auth accounts can be configured. Each entry requires:
#   - user_id: The username/user ID for authentication
#   - keyFilePath: Path to SSH key file (use either this or password)
#   - password: Personal access token or password (use either this or keyFilePath)
# Example:
#   gitAuth:
#     gitlab_pat:
#       userId: "myuser"
#       password: "glpat-xxxxxxxxxxxx"
#     github_ssh:
#       userId: "git"
#       keyFilePath: "/path/to/ssh/key"
gitAuth: {}

# OAuth/OIDC authentication providers for applications.
# Multiple auth providers can be configured. All keys are optional.
# Supported keys:
#   - key: OAuth client ID
#   - secret: OAuth client secret
#   - orgUrl: Organization URL (for Okta)
#   - domain: Domain (for Auth0)
#   - discoveryUrl: OIDC discovery URL
#   - hostedDomain: Hosted domain (for Google)
#   - scopes: List of OAuth scopes
# Example:
#   auth:
#     google_openrun:
#       key: "xxxxx.apps.googleusercontent.com"
#       secret: "GOCSPX-xxxxx"
#       hostedDomain: "openrun.dev"
#     github_local:
#       key: "Ov23xxxxx"
#       secret: "5dc28xxxxx"
#     oidc_okta:
#       key: "0oavknst5tchw8unl697"
#       secret: "nBTsFRY9BUZ5aAQsbmHt"
#       discoveryUrl: "https://example.okta.com/.well-known/openid-configuration"
#       scopes: ["openid", "profile", "email", "groups"]
auth: {}

# SAML authentication providers for applications.
# Multiple SAML providers can be configured. All keys are optional.
# Supported keys:
#   - metadataUrl: SAML metadata URL
#   - groupsAttr: Groups attribute name
#   - usePost: Use POST binding (default: false)
#   - forceAuthn: Force authentication (default: false)
# Example:
#   saml:
#     okta_test:
#       metadataUrl: "https://example.okta.com/app/xxxxx/sso/saml/metadata"
#       forceAuthn: false
#     azure_ad:
#       metadataUrl: "https://login.microsoftonline.com/xxxxx/federationmetadata/2007-06/federationmetadata.xml"
#       groupsAttr: "groups"
#       usePost: true
saml: {}

registry:
  # The in-cluster registry is for basic setups. Production installs should
  # use an external registry service or an existing Harbor deployment.
  enabled: false
  image:
    repository: registry
    tag: "2.8.3"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 5000
    annotations: {}
  persistence:
    enabled: true
    accessModes:
      - ReadWriteOnce
    size: 20Gi
    storageClassName: ""
  resources: {}
  annotations: {}
  podAnnotations: {}
  podLabels: {}
  podSecurityContext: {}
  containerSecurityContext: {}
  extraEnv: []
  auth:
    enabled: false
    secretName: ""
    existingSecretName: ""
    username: ""
    password: ""
    htpasswd: ""
    path: /etc/docker/registry/htpasswd
